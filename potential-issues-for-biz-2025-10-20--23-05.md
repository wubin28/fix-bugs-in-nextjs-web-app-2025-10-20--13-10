# Next.js 应用的业务逻辑问题清单

以下是在代码中发现的业务逻辑问题，按照产品演示影响程度从高到低排序：

## 1. 提示词优化功能问题

### 1.1. 提示词长度限制缺失（高）
**位置**: `components/MainContent.tsx`
**问题描述**: 原始提示词没有设置最大长度限制。在实际演示中，如果产品经理复制粘贴了过长的文本，可能导致：
- UI 显示混乱
- API 调用失败（如果后续接入真实的 DeepSeek API）
- 历史记录标题截取逻辑异常
**建议修复**:
- 设置原始提示词的最大长度限制（如 1000 字）
- 添加字数统计和提示
- 添加长文本的截断和警告提示

### 1.2. 优化结果异常处理不完整（高）
**位置**: `components/MainContent.tsx` 第 80-93 行
**问题描述**: 当前的错误处理过于简单，没有区分不同的失败场景：
- 网络错误
- API 限流
- 内容不合规
- 服务器错误
**建议修复**:
- 添加具体的错误类型判断
- 为不同错误类型提供不同的用户提示和处理方式
- 在 UI 上明确显示是使用了基础模式还是智能模式

## 2. 历史记录管理问题

### 2.1. 历史记录标题编辑缺乏验证（中）
**位置**: `components/HistoryList.tsx` 第 43-47 行
**问题描述**: 
- 编辑后的标题没有长度限制
- 没有处理纯空格的标题
- 没有考虑标题重复的情况
**建议修复**:
- 添加标题长度限制（与原始需求一致，最长 30 个汉字）
- 添加标题格式验证
- 在重复标题时添加序号或时间戳后缀

### 2.2. 历史记录分组逻辑缺失（中）
**位置**: `components/HistoryList.tsx`
**问题描述**: 虽然 UI 上显示了"Today"、"Yesterday"和"Older"的分组，但代码中缺少：
- 日期边界判断逻辑
- 跨天时的记录重分组处理
- 时区考虑
**建议修复**:
- 添加日期边界判断
- 实现记录的动态重分组
- 考虑用户时区

## 3. 用户体验问题

### 3.1. 复制功能反馈不足（中）
**位置**: `components/MainContent.tsx` 第 127-134 行
**问题描述**: 当前的复制功能缺少：
- 复制成功/失败的用户反馈
- 复制按钮的禁用状态（当没有内容时）
**建议修复**:
- 添加复制成功/失败的提示
- 在没有内容时禁用复制按钮
- 添加复制动画效果提升用户体验

### 3.2. 流式响应状态展示不完整（中）
**位置**: `components/MainContent.tsx`
**问题描述**: 
- 缺少明确的流式响应进度展示
- 优化过程中的状态反馈不足
**建议修复**:
- 添加打字机效果的进度指示
- 显示预估完成时间
- 添加取消优化的功能

## 4. 表单验证问题

### 4.1. 用户输入验证不足（低）
**位置**: `components/AuthModal.tsx` 第 22-32 行
**问题描述**: 
- 用户名没有限制特殊字符
- 密码强度没有要求
- 没有防止重复提交
**建议修复**:
- 添加用户名格式验证（如：只允许字母、数字和下划线）
- 密码强度提示
- 添加表单防重复提交处理

### 4.2. 切换语言时的文本问题（低）
**位置**: 多个组件
**问题描述**: 
- 切换语言时可能导致文本长度变化引起布局跳动
- 部分错误信息未进行国际化
**建议修复**:
- 统一中英文字符长度的布局处理
- 补充缺失的国际化文本
- 添加语言切换时的过渡动画

## 建议优化的演示体验

1. **演示模式**:
   - 添加一个"演示模式"开关
   - 在演示模式下预设一些示例提示词
   - 提供一键重置所有数据的功能

2. **引导功能**:
   - 添加功能引导提示
   - 提供快捷键提示
   - 添加示例使用场景

3. **错误演示**:
   - 提供常见错误情况的演示选项
   - 添加错误处理效果的展示
   - 提供性能限制的演示场景

以上问题都是在保持代码简单（适合演示）的同时，可能影响产品经理演示效果的业务逻辑问题。建议根据实际演示需求优先修复高优先级问题。